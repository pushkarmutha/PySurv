
<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>PySurv | Simple utility for plotting KM curves</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="PySurv" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Simple utility for plotting KM curves" />
<meta property="og:description" content="Simple utility for plotting KM curves" />
<link rel="canonical" href="https://pushkarmutha.github.io/PySurv/" />
<meta property="og:url" content="https://pushkarmutha.github.io/PySurv/" />
<meta property="og:site_name" content="PySurv" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="PySurv" />
<meta name="google-site-verification" content="JQBFcsYZr_-cAzEaasPtFQM8wJ7Rgw4eN_AM32-fCzk" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","description":"Simple utility for plotting KM curves","headline":"PySurv","name":"PySurv","url":"https://pushkarmutha.github.io/PySurv/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/PySurv/assets/css/style.css?v=6c4313ddeb448f2f7ae5ea31977e3fc6c4803547">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/PySurv/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      

      <h1 id="pysurv">PySurv</h1>

<p>PySurv is a Python package for generating and plotting Kaplan-Meier survival curves. It is designed to be simple and intuitive and is inspired from <a href="https://github.com/aebergl/MatSurv">MatSurv</a>.</p>

<p><img src="/PySurv/images/KMCurve.svg" alt="KM Curve Example" />
<img src="/PySurv/images/Summary.png" alt="Summary Example" /></p>

<h2 id="features">Features</h2>

<ul>
  <li>Generate Kaplan-Meier (KM) survival curves</li>
  <li>Calculate hazard ratios (HR) with 95% confidence intervals using Cox PH method</li>
  <li>Option to show or hide confidence intervals (CI) for KM curves</li>
  <li>Flexible plotting with customizable styles, colors, and labels</li>
  <li>Generate synthetic time-to-event data by specifying hazard ratio and censoring rate.</li>
</ul>

<h2 id="installation">Installation</h2>

<p>You can install PySurv via PyPI:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install pysurv
</code></pre></div></div>
<p>Make sure you have the following dependencies installed:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- numpy
- pandas
- lifelines
- matplotlib
</code></pre></div></div>
<p>These will be installed automatically when you install PySurv using pip.</p>

<h2 id="usage">Usage</h2>

<p>Here’s a detailed example of how to use PySurv for generating data, plotting KM curves, and customizing the output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import pysurv

# Generate synthetic data
data = pysurv.generate_time_to_event_data(n_samples=2000, hazard_ratio=0.5, censoring_rate=0.3)

# Plot Kaplan-Meier curve with custom labels and colors
pysurv.plot_km_curve(
    data, 
    time_col='time', 
    event_col='event', 
    group_col='group', 
    group_labels=('Control Group', 'Treatment Group'),
    title="Survival Analysis of Treatment vs Control",
    y_label="Survival Probability (%)",
    x_label="Time (months)",
    colors=['blue', 'orange'], 
    show_ci=True,
    survival_time_points=[12, 24],  # Show % survival at 12 and 24 months
    return_summary=False,
    savepath='./KMCurve.svg'
)
</code></pre></div></div>

<h3 id="output">Output:</h3>

<ul>
  <li>A Kaplan-Meier curve</li>
  <li>Summary statistics, including median survival time and percentage survival at given time point(s)</li>
  <li>Hazard ratio and p-value displayed on the plot</li>
</ul>

<h2 id="function-reference">Function Reference</h2>

<h3 id="plot_km_curve">plot_km_curve</h3>

<p>Plots Kaplan-Meier survival curves and calculates hazard ratios, p-values, and confidence intervals.</p>

<h4 id="parameters">Parameters:</h4>
<ul>
  <li>data: A Pandas DataFrame containing time-to-event data.</li>
  <li>time_col: Column name for the time data.</li>
  <li>event_col: Column name for the event data (1 for event, 0 for censored).</li>
  <li>group_col: Column name for the binary group data.</li>
  <li>group_labels: Labels for the groups (default: None).</li>
  <li>title: Title for the plot (default: None).</li>
  <li>y_label: Label for the y-axis (default: ‘Survival Probability’).</li>
  <li>x_label: Label for the x-axis (default: ‘Time (months)’).</li>
  <li>colors: List of colors for the groups (default: [‘r’, ‘b’]). If more than two groups, please manually provide a list of colors.</li>
  <li>line_styles: Line styles for the groups (default: ’-‘).</li>
  <li>fontsize: Font size for text on KM curve including title, axis labels, and risk tables (default: 18).</li>
  <li>linewidth: Line width of KM curves (default: 2.5).</li>
  <li>show_ci: Whether to show confidence intervals on the KM curves (default: False).</li>
  <li>show_inverted_hr: Whether to show inverted hazard ratio (default: False).</li>
  <li>survival_time_points (list): One or more time point(s) at which to estimate percentage survival (default: None).</li>
  <li>return_summary: Whether to return a summary of survival and hazard ratio statistics (default: False).</li>
  <li>savepath: Complete path (including filename and extension) to save the KM curve plot (default: None).</li>
  <li>**kwargs: Additional matplotlib arguments to pass for plotting KM curves.</li>
</ul>

<h4 id="note">*Note:</h4>
<ul>
  <li>PySurv uses a univariable Cox regression model on the ‘group_col’ variable to compute hazard ratios and p-values.</li>
  <li>MatSurv deafaults to the ‘Mantel-Haenszel’ (MH) and ‘log rank’ method.</li>
  <li>Under the proportional hazards assumption, Cox regression is equivalent, if not better, to the MH/log-rank method.</li>
  <li>For more information, see <a href="https://www.fharrell.com/post/logrank/">this</a> and <a href="https://discourse.datamethods.org/t/when-is-log-rank-preferred-over-univariable-cox-regression/2344">this</a>.</li>
</ul>

<h2 id="todo">ToDo</h2>
<ul>
  <li>Clean up and organize the code</li>
  <li>Support m-ary cases</li>
  <li>Color risk tables below the KM curves</li>
</ul>

<p>If you’d like to contribute to PySurv, here’s how you can help:</p>

<ol>
  <li>Fork the repository.</li>
  <li>Create a new branch (git checkout -b feature/your-feature).</li>
  <li>Make your changes and commit them (git commit -am ‘Add some feature’).</li>
  <li>Push to the branch (git push origin feature/your-feature).</li>
  <li>Create a pull request.</li>
</ol>

<p>Please make sure to update tests as appropriate and follow the style guide used in the project.</p>

<h2 id="license">License</h2>

<p>This project is licensed under the MIT License - see the LICENSE file for details.</p>

<h2 id="disclaimer">Disclaimer</h2>
<p>This code is still in the initial stages and may contain bugs. I make no guarantees for the accuracy of this code. By using this code, you agree to take full responsibility for any issues or inaccuracies that may arise.</p>


      
      <div class="footer border-top border-gray-light mt-5 pt-3 text-right text-gray">
        This site is open source. <a href="https://github.com/pushkarmutha/PySurv/edit/main/README.md">Improve this page</a>.
      </div>
      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
